[gd_scene load_steps=12 format=3 uid="uid://npqq3emis8fp"]

[ext_resource type="Script" path="res://Scripts/Track/Track.gd" id="1_lefyp"]
[ext_resource type="Texture2D" uid="uid://de408o2kge2ij" path="res://Demo/Assets/crosstie.png" id="2_pwu6q"]
[ext_resource type="PackedScene" uid="uid://rtmytihb6tps" path="res://Scenes/Track/Junction.tscn" id="3_3fl08"]
[ext_resource type="Texture2D" uid="uid://byy06tv4y101x" path="res://Demo/Assets/track.png" id="4_nnpfv"]
[ext_resource type="Texture2D" uid="uid://c3fhkuwvc3bme" path="res://Demo/Assets/arrow_one_way.png" id="6_ra8mv"]
[ext_resource type="Texture2D" uid="uid://dfg3msajrk3ww" path="res://Demo/Assets/arrow_one_way_disabled.png" id="7_sonf4"]

[sub_resource type="Curve2D" id="1"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 141.446, -0.190674, 0, 0, 0, 0, 256, 0)
}
point_count = 3

[sub_resource type="ArrayMesh" id="7"]
_surfaces = [{
"aabb": AABB(-1.5, -12.5, 0, 3.00001, 25, 0),
"attribute_data": PackedByteArray(0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0),
"format": 34360004625,
"index_count": 6,
"index_data": PackedByteArray(3, 0, 0, 0, 1, 0, 1, 0, 2, 0, 3, 0),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 4,
"vertex_data": PackedByteArray(0, 0, 192, 63, 0, 0, 72, 65, 0, 0, 0, 0, 0, 0, 192, 191, 0, 0, 72, 65, 101, 0, 0, 0, 0, 0, 192, 191, 0, 0, 72, 193, 0, 0, 0, 0, 0, 0, 192, 63, 0, 0, 72, 193, 0, 0, 0, 0)
}]

[sub_resource type="MultiMesh" id="6"]
resource_local_to_scene = true
instance_count = 26
mesh = SubResource("7")
buffer = PackedFloat32Array(0.999999, 0.00134803, 0, 5, -0.00134803, 0.999999, 0, -0.00674016, 0.999999, 0.00134803, 0, 15, -0.00134803, 0.999999, 0, -0.0202205, 0.999999, 0.00134803, 0, 25, -0.00134803, 0.999999, 0, -0.0337008, 0.999999, 0.00134803, 0, 35, -0.00134803, 0.999999, 0, -0.0471811, 0.999999, 0.00134803, 0, 45, -0.00134803, 0.999999, 0, -0.0606615, 0.999999, 0.00134803, 0, 54.9999, -0.00134803, 0.999999, 0, -0.0741418, 0.999999, 0.00134803, 0, 64.9999, -0.00134803, 0.999999, 0, -0.0876221, 0.999999, 0.00134803, 0, 74.9999, -0.00134803, 0.999999, 0, -0.101102, 0.999999, 0.00134803, 0, 84.9999, -0.00134803, 0.999999, 0, -0.114583, 0.999999, 0.00134804, 0, 94.9999, -0.00134804, 0.999999, 0, -0.128063, 0.999999, 0.00134803, 0, 105, -0.00134803, 0.999999, 0, -0.141543, 0.999999, 0.00134803, 0, 115, -0.00134803, 0.999999, 0, -0.155024, 0.999999, 0.00134803, 0, 125, -0.00134803, 0.999999, 0, -0.168504, 0.999999, 0.00134803, 0, 135, -0.00134803, 0.999999, 0, -0.181984, 0.999999, -0.00166449, 0, 145, 0.00166449, 0.999999, 0, -0.184759, 0.999999, -0.00166449, 0, 155, 0.00166449, 0.999999, 0, -0.168114, 0.999999, -0.00166449, 0, 165, 0.00166449, 0.999999, 0, -0.151469, 0.999999, -0.00166448, 0, 175, 0.00166448, 0.999999, 0, -0.134824, 0.999999, -0.00166449, 0, 185, 0.00166449, 0.999999, 0, -0.118179, 0.999999, -0.00166449, 0, 195, 0.00166449, 0.999999, 0, -0.101534, 0.999999, -0.00166449, 0, 205, 0.00166449, 0.999999, 0, -0.0848891, 0.999999, -0.00166449, 0, 215, 0.00166449, 0.999999, 0, -0.0682442, 0.999999, -0.00166449, 0, 225, 0.00166449, 0.999999, 0, -0.0515993, 0.999999, -0.00166449, 0, 235, 0.00166449, 0.999999, 0, -0.0349544, 0.999999, -0.00166449, 0, 245, 0.00166449, 0.999999, 0, -0.0183095, 0.999999, -0.00166448, 0, 255, 0.00166448, 0.999999, 0, -0.00166464)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_ir1jg"]
b = Vector2(0, 0)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_qv0bp"]
b = Vector2(0, 0)

[node name="Track" type="Path2D"]
curve = SubResource("1")
script = ExtResource("1_lefyp")

[node name="Crosstie" type="MeshInstance2D" parent="."]
visible = false
z_index = 1
position = Vector2(-8, -16)
mesh = SubResource("7")
texture = ExtResource("2_pwu6q")

[node name="MultiMeshInstance2D" type="MultiMeshInstance2D" parent="."]
z_index = 1
multimesh = SubResource("6")
texture = ExtResource("2_pwu6q")

[node name="HeadPoint" type="PathFollow2D" parent="."]
z_index = 3
z_as_relative = false
rotation = -0.00134803
loop = false

[node name="TrackJunction" parent="HeadPoint" instance=ExtResource("3_3fl08")]
end = "head"

[node name="TailPoint" type="PathFollow2D" parent="."]
z_index = 3
z_as_relative = false
position = Vector2(256, 0)
rotation = 0.00166449
progress = 256.0
loop = false

[node name="TrackJunction" parent="TailPoint" instance=ExtResource("3_3fl08")]
rotation = 3.14159
end = "tail"

[node name="Line2D" type="Line2D" parent="."]
z_index = 2
points = PackedVector2Array(0, 0, 1.5885, -0.00214136, 6.07776, -0.00819302, 9.28067, -0.0125107, 13.0534, -0.0175964, 17.3441, -0.0233804, 22.1009, -0.0297928, 24.638, -0.0332129, 27.2722, -0.0367639, 29.9971, -0.0404371, 32.8061, -0.0442237, 35.6928, -0.0481151, 38.6507, -0.0521025, 41.6734, -0.0561772, 44.7544, -0.0603304, 47.8872, -0.0645535, 51.0653, -0.0688377, 54.2822, -0.0731742, 57.5315, -0.0775544, 60.8067, -0.0819695, 64.1013, -0.0864108, 67.4089, -0.0908695, 70.723, -0.095337, 74.0371, -0.0998045, 77.3446, -0.104263, 80.6393, -0.108704, 83.9145, -0.11312, 87.1638, -0.1175, 90.3808, -0.121836, 93.5588, -0.12612, 96.6916, -0.130344, 99.7726, -0.134497, 102.795, -0.138572, 105.753, -0.142559, 108.64, -0.14645, 111.449, -0.150237, 114.174, -0.15391, 116.808, -0.157461, 119.345, -0.160881, 124.102, -0.167294, 128.393, -0.173078, 132.165, -0.178163, 135.368, -0.182481, 139.857, -0.188533, 141.446, -0.190674, 146.368, -0.182481, 148.962, -0.178163, 152.018, -0.173078, 155.493, -0.167294, 159.345, -0.160881, 163.533, -0.15391, 168.015, -0.14645, 172.748, -0.138572, 177.692, -0.130344, 180.229, -0.12612, 182.803, -0.121836, 185.408, -0.1175, 188.039, -0.11312, 190.692, -0.108704, 193.36, -0.104263, 196.039, -0.0998045, 198.723, -0.095337, 201.407, -0.0908695, 204.086, -0.0864108, 206.754, -0.0819695, 209.406, -0.0775544, 212.038, -0.0731742, 214.643, -0.0688377, 217.217, -0.0645535, 219.754, -0.0603305, 224.698, -0.0521025, 229.431, -0.0442237, 233.913, -0.0367639, 238.101, -0.0297928, 241.953, -0.0233804, 245.428, -0.0175964, 248.484, -0.0125107, 251.078, -0.00819302, 256, 0)
width = 20.0
texture = ExtResource("4_nnpfv")
texture_mode = 1

[node name="TailArrow" type="PathFollow2D" parent="."]
z_index = 2
position = Vector2(176.17, -0.132876)
rotation = 0.00166449
progress = 176.0

[node name="ButtonTailPrimary" type="TextureButton" parent="TailArrow"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture_normal = ExtResource("7_sonf4")
texture_disabled = ExtResource("6_ra8mv")
stretch_mode = 3

[node name="Area2DTailArrow" type="Area2D" parent="TailArrow"]
collision_layer = 4
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="TailArrow/Area2DTailArrow"]
shape = SubResource("SegmentShape2D_ir1jg")

[node name="HeadArrow" type="PathFollow2D" parent="."]
z_index = 2
position = Vector2(80.0014, -0.107845)
rotation = -0.00134803
progress = 80.0

[node name="ButtonHeadPrimary" type="TextureButton" parent="HeadArrow"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 9.99039
offset_top = 7.0
offset_right = 29.9904
offset_bottom = 22.0
grow_horizontal = 2
grow_vertical = 2
rotation = 3.14159
texture_normal = ExtResource("7_sonf4")
texture_disabled = ExtResource("6_ra8mv")
stretch_mode = 3

[node name="Area2DHeadArrow" type="Area2D" parent="HeadArrow"]
collision_layer = 4
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="HeadArrow/Area2DHeadArrow"]
shape = SubResource("SegmentShape2D_qv0bp")

[connection signal="pressed" from="TailArrow/ButtonTailPrimary" to="." method="_on_button_tail_primary_pressed"]
[connection signal="area_entered" from="TailArrow/Area2DTailArrow" to="." method="_on_area_2d_tail_arrow_area_entered"]
[connection signal="pressed" from="HeadArrow/ButtonHeadPrimary" to="." method="_on_button_head_primary_pressed"]
[connection signal="area_entered" from="HeadArrow/Area2DHeadArrow" to="." method="_on_area_2d_head_arrow_area_entered"]
